{% extends 'base.html' %}
{% block content %}
<h2 class="mt-3">{% if course %}Sửa học phần{% else %}Thêm học phần{% endif %}</h2>
<form method="POST" class="mt-3">
    {% if course %}
    <input type="hidden" name="course_id" value="{{ course[0] }}">
    {% endif %}
    <div class="mb-3">
        <label class="form-label">Mã học phần</label>
        <input type="text" name="code" class="form-control" value="{{ course[1] if course else '' }}" required>
    </div>
    <div class="mb-3">
        <label class="form-label">Tên</label>
        <input type="text" name="name" class="form-control" value="{{ course[2] if course else '' }}" required>
    </div>
    <div class="mb-3">
        <label class="form-label">Hệ số</label>
        <input type="number" step="0.1" name="coefficient" class="form-control" value="{{ course[3] if course else '' }}" required>
    </div>
    <div class="mb-3">
        <label class="form-label">Khoa</label>
        <select name="department_id" class="form-control" {% if current_user.role == 'department_admin' %}disabled{% endif %} required>
            {% for dept in departments %}
            <option value="{{ dept[0] }}" {% if (course and course[3] == dept[2]) or (current_user.role == 'department_admin' and current_user.department_id == dept[0]) %}selected{% endif %}>{{ dept[2] }}</option>
            {% endfor %}
        </select>
    </div>
    <button type="submit" class="btn btn-primary">{% if course %}Cập nhật{% else %}Thêm{% endif %}</button>
</form>
{% endblock %}